<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>FastCripto - Conversão de Criptomoedas</title>
    <link rel="stylesheet" href="assets/css/styles.css" />
    <link rel="stylesheet" href="assets/css/responsive.css" />

    <script>
      // Detecção do ambiente FastCripto com base no domínio
      (function () {
        let configFile = 'config.prod.js';
        const hostname = window.location.hostname;

        if (hostname.includes('dev.fastcripto.com')) {
          configFile = 'config.dev.js';
          console.log('Ambiente FastCripto: Desenvolvimento');
        } else if (hostname.includes('teste.fastcripto.com')) {
          configFile = 'config.teste.js';
          console.log('Ambiente FastCripto: Testes');
        } else {
          console.log('Ambiente FastCripto: Produção');
        }

        // Inserir a tag de script com o arquivo de configuração apropriado
        const configScript = document.createElement('script');
        configScript.src = `assets/js/config/${configFile}`;
        document.head.appendChild(configScript);
      })();
    </script>
  </head>
  <body>
    <header>
      <div class="container">
        <div class="header-content">
          <div class="logo"><span class="logo-icon">₿</span> FastCripto</div>
          <nav>
            <ul>
              <li>
                <a href="#" class="tab-nav active" data-tab="converter"
                  >Conversor</a
                >
              </li>
              <li><a href="#" class="tab-nav" data-tab="rates">Cotações</a></li>
              <li>
                <a href="#" class="tab-nav" data-tab="transactions"
                  >Transações</a
                >
              </li>
              <li>
                <a href="#" class="tab-nav" data-tab="account">Minha Conta</a>
              </li>
            </ul>
          </nav>
        </div>
      </div>
    </header>

    <main>
      <div class="container">
        <!-- Seção do Conversor -->
        <section id="converter" class="tab-content active">
          <h1>Converta Reais para Criptomoedas</h1>
          <p class="subtitle">
            Simule a conversão com cálculo automático de impostos e taxas.
          </p>

          <div class="conversion-card">
            <div class="conversion-steps">
              <div class="step active">1. Simular</div>
              <div class="step">2. Revisar</div>
              <div class="step">3. KYC</div>
              <div class="step">4. Concluir</div>
            </div>

            <form id="conversion-form">
              <div class="form-group">
                <label for="brl-amount">Valor em Reais (R$)</label>
                <input
                  type="number"
                  id="brl-amount"
                  min="100"
                  step="10"
                  placeholder="Ex: 1000"
                  required
                />
                <small>Mínimo: R$ 100,00</small>
              </div>

              <div class="form-group">
                <label>Selecione a Criptomoeda</label>
                <div class="crypto-options">
                  <label class="crypto-option">
                    <input
                      type="radio"
                      name="crypto-currency"
                      value="BTC"
                      checked
                    />
                    <span class="crypto-icon">
                      <svg
                        width="40"
                        height="40"
                        viewBox="0 0 24 24"
                        fill="none"
                        xmlns="http://www.w3.org/2000/svg"
                      >
                        <path
                          d="M23.638 14.904c-1.602 6.425-8.113 10.323-14.542 8.721C2.67 22.024-1.228 15.51.373 9.085 1.975 2.66 8.486-1.238 14.914.364c6.43 1.603 10.326 8.116 8.724 14.54z"
                          fill="#FFC107"
                        />
                        <path
                          d="M17.592 10.545c.228-1.546-.924-2.379-2.5-2.934l.512-2.07-1.251-.314-.499 2.013c-.328-.081-.665-.159-.999-.234l.502-2.023-1.25-.314-.511 2.07a41.061 41.061 0 01-.799-.188l.002-.008-1.725-.433-.333 1.349s.924.214.906.227c.504.126.595.462.581.728l-.582 2.342c.035.009.08.021.129.04l-.131-.033-.815 3.28c-.062.153-.218.384-.572.296.013.018-.906-.227-.906-.227l-.62 1.437 1.629.407c.303.077.601.157.893.232l-.516 2.088 1.25.314.511-2.07c.34.093.672.179.996.259l-.51 2.057 1.251.314.516-2.086c2.127.404 3.724.242 4.395-1.686.54-1.552-.026-2.448-1.14-3.032.812-.188 1.422-.723 1.585-1.828zM14.278 14.09c-.385 1.55-2.982.712-3.825.502l.682-2.739c.842.21 3.544.628 3.143 2.237zm.384-4.02c-.35 1.405-2.513.69-3.214.516l.618-2.485c.7.174 2.96.5 2.596 1.969z"
                          fill="#ffffff"
                        />
                      </svg>
                    </span>
                    <span class="crypto-name">Bitcoin</span>
                    <span class="crypto-ticker">BTC</span>
                  </label>
                  <label class="crypto-option">
                    <input type="radio" name="crypto-currency" value="ETH" />
                    <span class="crypto-icon">Ξ</span>
                    <span class="crypto-name">Ethereum</span>
                    <span class="crypto-ticker">ETH</span>
                  </label>
                  <label class="crypto-option">
                    <input type="radio" name="crypto-currency" value="USDT" />
                    <span class="crypto-icon">₮</span>
                    <span class="crypto-name">Tether</span>
                    <span class="crypto-ticker">USDT</span>
                  </label>
                </div>
              </div>

              <div class="form-group">
                <label>Escolha a Rede</label>
                <div class="network-options">
                  <label class="network-option">
                    <input
                      type="radio"
                      name="network"
                      value="BTC"
                      class="network-btc"
                      checked
                    />
                    <span>Bitcoin</span>
                  </label>
                  <label class="network-option">
                    <input
                      type="radio"
                      name="network"
                      value="ETH"
                      class="network-eth"
                    />
                    <span>Ethereum</span>
                  </label>
                  <label class="network-option">
                    <input
                      type="radio"
                      name="network"
                      value="BSC"
                      class="network-bsc"
                    />
                    <span>BSC</span>
                  </label>
                </div>
              </div>

              <div class="form-group">
                <label for="wallet-address">Endereço da Carteira</label>
                <input
                  type="text"
                  id="wallet-address"
                  placeholder="Ex: 0x1234..."
                  required
                />
              </div>

              <div class="conversion-result hidden" id="conversion-result">
                <h3>Resumo da Conversão</h3>
                <div class="result-row">
                  <span>Valor em Reais:</span>
                  <span id="result-brl-amount">R$ 0,00</span>
                </div>
                <div class="result-row">
                  <span>IOF (0,38%):</span>
                  <span id="result-iof">- R$ 0,00</span>
                </div>
                <div class="result-row">
                  <span>Imposto de Renda (15%):</span>
                  <span id="result-ir">- R$ 0,00</span>
                </div>
                <div class="result-row">
                  <span>Taxa de Serviço (10%):</span>
                  <span id="result-service-fee">- R$ 0,00</span>
                </div>
                <div class="result-row">
                  <span>Taxa de Rede:</span>
                  <span id="result-network-fee">- R$ 0,00</span>
                </div>
                <div class="result-row total">
                  <span>Valor Líquido:</span>
                  <span id="result-net-amount">R$ 0,00</span>
                </div>
                <div class="result-row rate-info">
                  <span>Cotação utilizada:</span>
                  <span id="result-rate">R$ 0,00</span>
                </div>
                <div class="result-row crypto-result">
                  <span>Você receberá:</span>
                  <span id="result-crypto-amount">0 BTC</span>
                </div>
              </div>

              <div class="form-actions">
                <button type="button" id="btn-calculate" class="btn primary">
                  Calcular Conversão
                </button>
                <button
                  type="button"
                  id="btn-proceed"
                  class="btn success hidden"
                >
                  Prosseguir
                </button>
              </div>
            </form>
          </div>
        </section>

        <!-- Seção de Transações -->
        <section id="transactions" class="tab-content">
          <h1>Histórico de Transações</h1>
          <p class="subtitle">Acompanhe o status de suas conversões.</p>

          <div class="transactions-empty" id="transactions-empty">
            <p>Você ainda não realizou nenhuma transação.</p>
            <button class="btn primary" id="btn-new-transaction">
              Realizar Conversão
            </button>
          </div>

          <div class="transactions-list" id="transactions-list"></div>
        </section>

        <!-- Seção de Cotações -->
        <section id="rates" class="tab-content">
          <h1>Cotações Atualizadas</h1>
          <p class="subtitle">
            Acompanhe os valores das principais criptomoedas.
          </p>

          <div class="rates-control">
            <span id="last-update-time"></span>
            <button id="manual-refresh" class="btn small">Atualizar</button>
          </div>

          <div class="rates-loader" id="rates-loader"></div>

          <div class="rates-grid">
            <div class="rate-card">
              <div class="rate-icon">₿</div>
              <div class="rate-info">
                <h3>Bitcoin</h3>
                <p class="rate-ticker">BTC</p>
                <p class="rate-value" id="btc-rate">R$ 0,00</p>
              </div>
            </div>
            <div class="rate-card">
              <div class="rate-icon">Ξ</div>
              <div class="rate-info">
                <h3>Ethereum</h3>
                <p class="rate-ticker">ETH</p>
                <p class="rate-value" id="eth-rate">R$ 0,00</p>
              </div>
            </div>
            <div class="rate-card">
              <div class="rate-icon">₮</div>
              <div class="rate-info">
                <h3>Tether</h3>
                <p class="rate-ticker">USDT</p>
                <p class="rate-value" id="usdt-rate">R$ 0,00</p>
              </div>
            </div>
          </div>
        </section>

        <!-- Seção de Conta -->
        <section id="account" class="tab-content">
          <h1>Minha Conta</h1>
          <p class="subtitle">Gerencie seus dados e verificações.</p>

          <div class="account-card">
            <h2>Verificação KYC</h2>
            <p>
              Complete o processo de verificação de identidade para realizar
              conversões.
            </p>
            <button id="btn-start-kyc" class="btn primary">
              Iniciar Verificação
            </button>
          </div>
        </section>
      </div>
    </main>

    <!-- Container para notificações in-app -->
    <div id="notifications-container"></div>

    <div id="menu-container"></div>
    <script>
      // Carregar o menu dinamicamente
      fetch('menu.html')
        .then((response) => response.text())
        .then((html) => {
          document.getElementById('menu-container').innerHTML = html;
        })
        .catch((error) => console.error('Erro ao carregar o menu:', error));
    </script>

    <div id="footer-container"></div>
    <script>
      // Carregar o footer dinamicamente
      fetch('footer.html')
        .then(response => response.text())
        .then(html => {
          document.getElementById('footer-container').innerHTML = html;
        })
        .catch(error => console.error('Erro ao carregar o footer:', error));
    </script>

    <!-- Scripts -->
    <script type="module" src="assets/js/main.js"></script>
</body>
</html>
